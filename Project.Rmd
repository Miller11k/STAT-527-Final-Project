---
title: "Project"
author: "Miller Kodish"
date: "`r Sys.Date()`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
# install.packages("rstudioapi")
# Install only if missing — SAFE during knitting
if (!requireNamespace("here", quietly = TRUE)) {
  install.packages("here")
}
library(here)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
getwd()  # shows current working directory
```

# Loading In Datasets

```{r}
# Geekbench datasets
recent_cpu <- read.csv(here("Datasets", "Geekbench", "recent-cpu-v6.csv"))
recent_gpu <- read.csv(here("Datasets", "Geekbench", "recent-gpu-v6.csv"))
single_core <- read.csv(here("Datasets", "Geekbench", "single-core-v4.csv"))
```


```{r}
top_multi <- read.csv(here("Datasets", "Geekbench", "top-multi-core-v6.csv"))
top_single <- read.csv(here("Datasets", "Geekbench", "top-single-core-v6.csv"))

# Kaggle datasets
gpu_benchmarks <- read.csv(here("Datasets", "Kaggle", "GPU_benchmarks_v7.csv"))
gpu_scores <- read.csv(here("Datasets", "Kaggle", "GPU_scores_graphicsAPIs.csv"))
```

## Verifying Datasets Loaded In Correctly
```{r}
# Print basic info for each dataset
datasets <- list(
  recent_cpu = recent_cpu,
  recent_gpu = recent_gpu,
  single_core = single_core,
  top_multi = top_multi,
  top_single = top_single,
  gpu_benchmarks = gpu_benchmarks,
  gpu_scores = gpu_scores
)

for (name in names(datasets)) {
  cat("===== Dataset:", name, "=====\n")
  cat("Rows:", nrow(datasets[[name]]), " | Columns:", ncol(datasets[[name]]), "\n\n")
  cat("Column Names:\n")
  print(names(datasets[[name]]))
  cat("\nStructure:\n")
  str(datasets[[name]], max.level = 1)
  cat("\n\n")
}
```

# Filtering GPU Datasets By Manufacturer
```{r}
unique(gpu_scores$Manufacturer)
```


```{r}
manufacturers <- c("Nvidia", "AMD", "Apple", "Qualcomm", "Intel", 
                   "Other", "ARM", "PowerVR", "Samsung")

gpu_split <- split(gpu_scores, factor(gpu_scores$Manufacturer, levels = manufacturers))

for (m in manufacturers) {
  assign(
    paste0(tolower(m), "_gpu_scores"),   # variable name
    subset(gpu_scores, Manufacturer == m)   # filtered dataset
  )
}

# This creates:
#   nvidia_gpu_scores
#   amd_gpu_scores
#   apple_gpu_scores
#   qualcomm_gpu_scores
#   intel_gpu_scores
#   other_gpu_scores
#   arm_gpu_scores
#   powervr_gpu_scores
#   samsung_gpu_scores
```

```{r}
# Sort manufacturers alphabetically, but move "Other" to the end
sorted_manufacturers <- sort(manufacturers[manufacturers != "Other"])
sorted_manufacturers <- c(sorted_manufacturers, "Other")

# Print summary for each manufacturer dataset
for (m in sorted_manufacturers) {
  var_name <- paste0(tolower(m), "_gpu_scores")
  df <- get(var_name)
  
  cat("==== Dataset for:", m, "====\n")
  cat("Rows:", nrow(df), " | Columns:", ncol(df), "\n\n")
  
  cat("Column Names:\n")
  print(names(df))
  
  cat("\nHead (first 3 rows):\n")
  print(head(df, 3))
  
  cat("\n\n")
}
```

# Filtering GPU Dataset By Test Ran

```{r}
cuda_tests    <- subset(gpu_scores, !is.na(CUDA))
metal_tests   <- subset(gpu_scores, !is.na(Metal))
opencl_tests  <- subset(gpu_scores, !is.na(OpenCL))
vulkan_tests  <- subset(gpu_scores, !is.na(Vulkan))

test_types <- c("CUDA", "Metal", "OpenCL", "Vulkan")
test_datasets <- list(
  CUDA   = cuda_tests,
  Metal  = metal_tests,
  OpenCL = opencl_tests,
  Vulkan = vulkan_tests
)

for (t in test_types) {
  df <- test_datasets[[t]]
  
  cat("==== GPUs With", t, "Tests Ran ====\n")
  cat("Rows:", nrow(df), " | Columns:", ncol(df), "\n\n")
  
  cat("Column Names:\n")
  print(names(df))
  
  cat("\nHead (first 3 rows):\n")
  print(head(df, 3))
  
  cat("\n\n")
}
```

# Filtering by Manufacturer AND Test Ran

```{r}
# Manufacturer × Test combinations
tests <- c("CUDA", "Metal", "OpenCL", "Vulkan")

# Build a nested list: manufacturer -> test -> dataset
manu_test_split <- list()

for (m in manufacturers) {
  manu_test_split[[m]] <- list()
  
  for (t in tests) {
    # Filter by manufacturer AND test ran (non-NA)
    df <- subset(gpu_scores, Manufacturer == m & !is.na(gpu_scores[[t]]))
    
    manu_test_split[[m]][[t]] <- df
  }
}

# Print summaries (sorted manufacturers, "Other" last)
sorted_manufacturers <- sort(manufacturers[manufacturers != "Other"])
sorted_manufacturers <- c(sorted_manufacturers, "Other")

for (m in sorted_manufacturers) {
  for (t in tests) {
    df <- manu_test_split[[m]][[t]]
    
    cat("====", m, "-", t, "Test ====\n")
    cat("Rows:", nrow(df), " | Columns:", ncol(df), "\n\n")
    
    if (nrow(df) > 0) {
      cat("Column Names:\n")
      print(names(df))
      
      cat("\nHead (first 3 rows):\n")
      print(head(df, 3))
    } else {
      cat("No rows for this combination.\n")
    }
    
    cat("\n\n")
  }
}
```

For GPUs, geekbench reports testbench results based on these tests

```{r}

```